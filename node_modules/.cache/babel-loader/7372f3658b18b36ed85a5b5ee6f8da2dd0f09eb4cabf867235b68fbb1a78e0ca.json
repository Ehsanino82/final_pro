{"ast":null,"code":"var _jsxFileName = \"/home/shayan/web/project/Online-Hotel-Reservation/src/pages/ProfilePage.js\";\nimport React, { Component } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst URL = \"http://localhost:8080/\";\nasync function sendRequestToServer(data) {\n  try {\n    const response = await fetch(URL, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    });\n    if (!response.ok) {\n      // Handle server errors\n      throw new Error(`Request failed with status ${response.status}`);\n    }\n    const responseData = await response.json();\n\n    // Handle the response data from the server\n    console.log(responseData);\n    // Perform further operations with the response data\n    return responseData;\n  } catch (error) {\n    // Handle any errors during the request\n    console.error('Error:', error);\n  }\n  return null;\n}\nfunction setUserInCookie(user) {\n  const expirationDate = new Date();\n  // expire after 7 days\n  expirationDate.setDate(expirationDate.getDate() + 7);\n  const cookieValue = encodeURIComponent(user);\n  const cookieName = \"user\";\n  const cookieOptions = {\n    expires: expirationDate.toUTCString(),\n    path: \"/\"\n  };\n  document.cookie = `${cookieName}=${cookieValue}; ${Object.entries(cookieOptions).map(([key, value]) => `${key}=${value}`).join(\"; \")}`;\n}\nfunction getUserCookie() {\n  const cookieName = \"user=\";\n  const decodedCookie = decodeURIComponent(document.cookie);\n  const cookieArray = decodedCookie.split(';');\n\n  // find the value with key: \"user\"\n  for (let i = 0; i < cookieArray.length; i++) {\n    let cookie = cookieArray[i].trim();\n    if (cookie.startsWith(cookieName)) {\n      return cookie.substring(cookieName.length);\n    }\n  }\n  return null;\n}\nexport default class ProfilePage extends Component {\n  constructor(props) {\n    super(props);\n    this.handleCharge = event => {\n      this.setState({\n        newcharge: event.target.value\n      });\n      if (event.target.value == 0) {\n        this.setState({\n          useotherval: true\n        });\n      } else {\n        this.setState({\n          useotherval: false\n        });\n      }\n    };\n    this.handleinput = event => {\n      this.setState({\n        userinput: event.target.value\n      });\n    };\n    this.charge = () => {\n      //send to back\n      console.log(\"clicked\");\n      data = {\n        username: this.state.name,\n        credit: parseInt(this.state.userinput)\n      };\n      response = sendRequestToServer(data);\n      alert(response.message);\n      if (response.credit > 0) {\n        user = {\n          username: user.username,\n          password: user.password,\n          credit: user.credit + response.credit\n        };\n        setUserInCookie(user);\n      }\n    };\n    this.state = {\n      user: JSON.parse(getUserCookie()),\n      name: this.user.username,\n      money: this.user.credit,\n      newcharge: 10000,\n      useotherval: false,\n      userinput: \"\"\n    };\n  }\n  render() {\n    //header\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"px-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"welcome \", this.state.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"your money is  \", this.state.money]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \" charge your account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \" amount to charge\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        onChange: this.handleCharge,\n        value: this.state.newcharge,\n        className: \"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"10000\",\n          children: \"1 000 000\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"50000\",\n          children: \"5 000 000\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"100000\",\n          children: \"10 000 000\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"0\",\n          children: \"other amount\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), this.state.useotherval && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"how much you want to charge:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: this.state.userinput,\n          onChange: this.handleinput,\n          className: \"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(\"button\", {\n        class: \"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full\",\n        onClick: this.charge,\n        children: \"charge\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this);\n  }\n}","map":{"version":3,"names":["React","Component","jsxDEV","_jsxDEV","Fragment","_Fragment","URL","sendRequestToServer","data","response","fetch","method","headers","body","JSON","stringify","ok","Error","status","responseData","json","console","log","error","setUserInCookie","user","expirationDate","Date","setDate","getDate","cookieValue","encodeURIComponent","cookieName","cookieOptions","expires","toUTCString","path","document","cookie","Object","entries","map","key","value","join","getUserCookie","decodedCookie","decodeURIComponent","cookieArray","split","i","length","trim","startsWith","substring","ProfilePage","constructor","props","handleCharge","event","setState","newcharge","target","useotherval","handleinput","userinput","charge","username","state","name","credit","parseInt","alert","message","password","parse","money","render","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","type","class","onClick"],"sources":["/home/shayan/web/project/Online-Hotel-Reservation/src/pages/ProfilePage.js"],"sourcesContent":["import React, { Component } from 'react'\n\nconst URL = \"http://localhost:8080/\"\n\nasync function sendRequestToServer(data) {\n    try {\n        const response = await fetch(URL, {\n            method: 'POST',\n            headers: {\n            'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(data),\n        });\n\n        if (!response.ok) {\n            // Handle server errors\n            throw new Error(`Request failed with status ${response.status}`);\n        }\n\n        const responseData = await response.json();\n        \n        // Handle the response data from the server\n        console.log(responseData);\n        // Perform further operations with the response data\n        return responseData;\n    } \n    catch (error) {\n    // Handle any errors during the request\n    console.error('Error:', error);\n    }\n    return null;\n}\n\nfunction setUserInCookie(user) {\n    const expirationDate = new Date();\n    // expire after 7 days\n    expirationDate.setDate(expirationDate.getDate() + 7);\n    const cookieValue = encodeURIComponent(user);\n    const cookieName = \"user\";\n    const cookieOptions = {\n        expires: expirationDate.toUTCString(),\n        path: \"/\"\n    };\n    document.cookie = `${cookieName}=${cookieValue}; ${Object.entries(cookieOptions)\n        .map(([key, value]) => `${key}=${value}`)\n        .join(\"; \")}`;\n}\n\nfunction getUserCookie() {\n\n    const cookieName = \"user=\";\n    const decodedCookie = decodeURIComponent(document.cookie);\n    const cookieArray = decodedCookie.split(';');\n\n    // find the value with key: \"user\"\n    for (let i = 0; i < cookieArray.length; i++) {\n        let cookie = cookieArray[i].trim();\n        if (cookie.startsWith(cookieName)) {\n            return cookie.substring(cookieName.length);\n        }\n    }\n    return null;\n}\n\nexport default class ProfilePage extends Component {\n\n    constructor(props) {\n        super(props);\n        \n        this.state = {\n            user : JSON.parse(getUserCookie()),\n            name  : this.user.username,\n            money : this.user.credit,\n            newcharge : 10000,\n            useotherval : false,\n            userinput : \"\"\n        }\n        \n    }\n\n    \n    handleCharge = (event) => {\n        \n        this.setState({newcharge : event.target.value})\n\n        if (event.target.value == 0) {\n            this.setState({useotherval : true})\n\n        } else{\n            this.setState({useotherval : false})\n        }\n    }\n\n    handleinput = event => {\n        this.setState({userinput : event.target.value})\n    }\n\n    charge = () =>{\n        //send to back\n        console.log(\"clicked\");\n        data = {\n            username: this.state.name,\n            credit: parseInt(this.state.userinput),\n        };\n        response = sendRequestToServer(data);\n        alert(response.message);\n        if (response.credit > 0) {\n        user = {\n            username: user.username,\n            password: user.password,\n            credit: user.credit + response.credit,\n        };\n        setUserInCookie(user);\n        }\n    }\n\n  render() {\n     //header\n    return (\n       \n      <div  className = \"px-4\">\n        <h1 >\n            welcome {this.state.name}\n        </h1>\n        <p>\n            your money is  {this.state.money}\n        </p>\n\n        <label> charge your account</label>\n        <br></br>\n        <label> amount to charge</label>\n\n        <select onChange={this.handleCharge} value={this.state.newcharge} className=\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\">\n            <option value='10000'>1 000 000</option>\n            <option value='50000'>5 000 000</option>\n            <option value='100000'>10 000 000</option>\n            <option value='0'>other amount</option>\n        </select>\n\n        { this.state.useotherval &&\n        <>\n        <label>\n         how much you want to charge:\n        </label>\n\n        <input type=\"text\" value={this.state.userinput} onChange={this.handleinput} className= \"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500\">\n\n        </input>\n        </>\n        }   \n\n        \n\n        <button class=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full\" onClick={this.charge}>\n        charge\n        </button>\n\n  \n      </div>\n    )\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}